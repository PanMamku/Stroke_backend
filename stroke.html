<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì | Stroke Awareness</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kanit', sans-serif;
        }
        .scene {
            transition: opacity 0.5s ease-in-out;
        }
        .choice-btn {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .choice-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <main id="app-container" class="min-h-screen flex flex-col items-center justify-center p-4">

        <!-- Scene 1: Start Screen -->
        <section id="scene-start" class="scene w-full max-w-2xl text-center">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h1 class="text-4xl md:text-5xl font-bold text-teal-600 mb-4">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>
                <p class="text-lg text-stone-600 mb-8">‡πÄ‡∏Ñ‡∏¢‡∏™‡∏á‡∏™‡∏±‡∏¢‡πÑ‡∏´‡∏°‡∏ß‡πà‡∏≤... ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô ‡∏à‡∏∞‡∏û‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏õ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£? ‡∏°‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô</p>
                <button onclick="showScene('scene-morning')" class="choice-btn bg-teal-500 text-white font-bold py-3 px-10 rounded-full text-xl">
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß
                </button>
            </div>
        </section>

        <!-- Scene 2: Morning Choice -->
        <section id="scene-morning" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡πÄ‡∏ä‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà!</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏∑‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡∏õ‡∏•‡∏∏‡∏Å ‡∏à‡∏∞‡∏ó‡∏≤‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏ä‡πâ‡∏≤‡∏î‡∏µ?</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="recordChoice('breakfast', 'healthy'); showScene('scene-morning-symptom');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">ü•ó</span>
                        <h3 class="font-semibold text-lg">‡∏™‡∏•‡∏±‡∏î‡∏ú‡∏±‡∏Å‡∏Å‡∏±‡∏ö‡πÑ‡∏Ç‡πà‡∏ï‡πâ‡∏°</h3>
                        <p class="text-sm text-stone-500">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ß‡∏±‡∏ô‡∏î‡∏µ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</p>
                    </button>
                    <button onclick="recordChoice('breakfast', 'unhealthy'); showScene('scene-morning-symptom');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">ü•ì</span>
                        <h3 class="font-semibold text-lg">‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏´‡∏ô‡∏µ‡∏¢‡∏ß‡∏´‡∏°‡∏π‡∏õ‡∏¥‡πâ‡∏á</h3>
                        <p class="text-sm text-stone-500">‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏£‡∏µ‡∏ö‡πÑ‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</p>
                    </button>
                </div>
            </div>
        </section>

        <!-- Scene 2.5: Morning Symptom -->
        <section id="scene-morning-symptom" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <p id="morning-symptom-text" class="text-lg text-stone-600 mb-8"></p>
                <button onclick="showScene('scene-transport')" class="choice-btn bg-stone-200 text-stone-700 font-bold py-3 px-10 rounded-full text-lg">
                    ‡πÑ‡∏õ‡∏ï‡πà‡∏≠...
                </button>
            </div>
        </section>

        <!-- Scene 3: Transport Choice -->
        <section id="scene-transport" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡πÑ‡∏î‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏™‡∏±‡∏Å‡πÅ‡∏´‡πà‡∏á ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ‡πÑ‡∏´‡∏ô?</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="showScene('scene-destination')" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">üöå</span>
                        <h3 class="font-semibold text-lg">‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ó‡∏≤‡∏á</h3>
                        <p class="text-sm text-stone-500">‡∏ä‡∏°‡∏ß‡∏¥‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á</p>
                    </button>
                    <button onclick="showScene('scene-destination')" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">üöó</span>
                        <h3 class="font-semibold text-lg">‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÑ‡∏õ‡πÄ‡∏≠‡∏á</h3>
                        <p class="text-sm text-stone-500">‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏ö‡∏≤‡∏¢ ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</p>
                    </button>
                </div>
            </div>
        </section>

        <!-- Scene 3.5: Destination Choice -->
        <section id="scene-destination" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏ñ‡∏∂‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏Å‡∏û‡∏±‡∏Å‡∏Å‡πá‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏î‡∏µ?</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="recordChoice('activity', 'relax'); showScene('scene-activity-symptom');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">üå≥</span>
                        <h3 class="font-semibold text-lg">‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏™‡∏ß‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</h3>
                        <p class="text-sm text-stone-500">‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢ ‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå</p>
                    </button>
                    <button onclick="recordChoice('activity', 'stress'); showScene('scene-activity-symptom');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">üõçÔ∏è</span>
                        <h3 class="font-semibold text-lg">‡πÄ‡∏î‡∏¥‡∏ô‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á‡πÉ‡∏ô‡∏´‡πâ‡∏≤‡∏á</h3>
                        <p class="text-sm text-stone-500">‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏á‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤</p>
                    </button>
                </div>
            </div>
        </section>

        <!-- Scene 3.7: Activity Symptom -->
        <section id="scene-activity-symptom" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <p id="activity-symptom-text" class="text-lg text-stone-600 mb-8"></p>
                <button onclick="showScene('scene-incident')" class="choice-btn bg-stone-200 text-stone-700 font-bold py-3 px-10 rounded-full text-lg">
                    ‡πÑ‡∏õ‡∏ï‡πà‡∏≠...
                </button>
            </div>
        </section>

        <!-- Scene 4: The Incident -->
        <section id="scene-incident" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg border-4 border-red-400">
                <h2 class="text-3xl font-bold text-red-600 mb-2">‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏ù‡∏±‡∏ô!</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏¥‡∏ô‡πÜ... ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏•‡πâ‡∏°‡∏•‡∏á‡πÉ‡∏Å‡∏•‡πâ‡πÜ! ‡πÄ‡∏Ç‡∏≤‡∏î‡∏π‡∏™‡∏±‡∏ö‡∏™‡∏ô ‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î ‡πÅ‡∏•‡∏∞‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏î‡∏π‡∏ï‡∏Å‡πÜ ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="recordChoice('action', 'call'); showScene('scene-post-incident-choice');" class="choice-btn bg-green-500 text-white p-4 rounded-lg">
                        <h3 class="font-bold text-lg">‡πÇ‡∏ó‡∏£ 1669 (‡∏™‡∏≤‡∏¢‡∏î‡πà‡∏ß‡∏ô)</h3>
                        <p class="text-sm">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
                    </button>
                    <button onclick="recordChoice('action', 'panic'); showScene('scene-post-incident-choice');" class="choice-btn bg-yellow-500 text-white p-4 rounded-lg">
                        <h3 class="font-bold text-lg">‡∏ï‡∏Å‡πÉ‡∏à ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å</h3>
                        <p class="text-sm">‡∏¢‡∏∑‡∏ô‡∏ô‡∏¥‡πà‡∏á‡πÜ ‡∏°‡∏≠‡∏á‡∏î‡∏π‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</p>
                    </button>
                    <button onclick="recordChoice('action', 'first-aid'); showScene('scene-minigame');" class="choice-btn bg-blue-500 text-white p-4 rounded-lg">
                        <h3 class="font-bold text-lg">‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</h3>
                        <p class="text-sm">‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á</p>
                    </button>
                    <button onclick="recordChoice('action', 'record'); showScene('scene-post-incident-choice');" class="choice-btn bg-gray-500 text-white p-4 rounded-lg">
                        <h3 class="font-bold text-lg">‡∏´‡∏¢‡∏¥‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏°‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏Ñ‡∏•‡∏¥‡∏õ</h3>
                        <p class="text-sm">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô</p>
                    </button>
                </div>
            </div>
        </section>

        <!-- Scene 4.5: Mini-game -->
        <section id="scene-minigame" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ F.A.S.T</h2>
                <p class="text-lg text-stone-600 mb-6">‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°?</p>
                <div id="minigame-question" class="mb-6">
                    <p class="text-2xl font-semibold mb-4" id="fast-question">F - Face: ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?</p>
                </div>
                <div id="minigame-answers" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                     <button onclick="handleMinigameAnswer(true)" class="choice-btn bg-white p-4 rounded-lg border-2 border-stone-200">‡∏õ‡∏≤‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß, ‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ã‡∏µ‡∏Å</button>
                     <button onclick="handleMinigameAnswer(false)" class="choice-btn bg-white p-4 rounded-lg border-2 border-stone-200">‡∏õ‡∏ß‡∏î‡∏®‡∏µ‡∏£‡∏©‡∏∞‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</button>
                </div>
                <p id="minigame-feedback" class="mt-4 font-semibold"></p>
            </div>
        </section>

        <!-- Scene 5: Post-Incident Choice -->
        <section id="scene-post-incident-choice" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ô‡∏±‡πâ‡∏ô...</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÉ‡∏à‡∏´‡∏≤‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô ‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠‡∏î‡∏µ?</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button onclick="recordChoice('postIncidentDecision', 'continue'); showScene('scene-continue-trip-choice');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">‚û°Ô∏è</span>
                        <h3 class="font-semibold text-lg">‡πÉ‡∏ä‡πâ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ï‡πà‡∏≠</h3>
                        <p class="text-sm text-stone-500">‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏Ñ‡∏¥‡∏î‡∏°‡∏≤‡∏Å</p>
                    </button>
                    <button onclick="recordChoice('postIncidentDecision', 'gohome'); showScene('scene-evening');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">
                        <span class="text-4xl mb-2">üè†</span>
                        <h3 class="font-semibold text-lg">‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤</h3>
                        <p class="text-sm text-stone-500">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏û‡∏≠‡πÅ‡∏Ñ‡πà‡∏ô‡∏µ‡πâ</p>
                    </button>
                </div>
            </div>
        </section>

        <!-- Scene 5.1: Continue Trip Choice -->
        <section id="scene-continue-trip-choice" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡πÑ‡∏õ‡πÑ‡∏´‡∏ô‡∏ï‡πà‡∏≠‡∏î‡∏µ?</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏π‡πà‡∏°‡∏≤‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡πÅ‡∏ú‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button onclick="recordChoice('continuedActivity', 'eat'); showScene('scene-eat-choice');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">üçî</button>
                    <button onclick="recordChoice('continuedActivity', 'shop'); showScene('scene-shopping');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">üõçÔ∏è</button>
                    <button onclick="recordChoice('continuedActivity', 'friend'); showScene('scene-friend-house');" class="choice-btn bg-white p-6 rounded-lg border-2 border-stone-200">üßë‚Äçü§ù‚Äçüßë</button>
                </div>
            </div>
        </section>

        <!-- Scene 5.2: Eat Choice -->
        <section id="scene-eat-choice" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏≤‡∏ô‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤</h2>
                 <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏´‡∏¥‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß</p>
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="showScene('scene-go-home-choice')" class="choice-btn bg-white p-4 rounded-lg border-2 border-stone-200">üç¶ ‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°</button>
                    <button onclick="showScene('scene-go-home-choice')" class="choice-btn bg-white p-4 rounded-lg border-2 border-stone-200">üçï ‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤</button>
                    <button onclick="showScene('scene-go-home-choice')" class="choice-btn bg-white p-4 rounded-lg border-2 border-stone-200">üçî ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏≠‡∏£‡πå</button>
                    <button onclick="showScene('scene-go-home-choice')" class="choice-btn bg-white p-4 rounded-lg border-2 border-stone-200">üçõ ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢</button>
                </div>
            </div>
        </section>

        <!-- Scene 5.3: Shopping -->
        <section id="scene-shopping" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                 <h2 class="text-3xl font-bold mb-2">‡πÄ‡∏î‡∏¥‡∏ô‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏î‡∏¥‡∏ô‡∏î‡∏π‡∏Ç‡∏≠‡∏á‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡πÅ‡∏•‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏°‡∏≤‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß</p>
                <button onclick="showScene('scene-go-home-choice')" class="choice-btn bg-stone-200 text-stone-700 font-bold py-3 px-10 rounded-full text-lg">
                    ‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô
                </button>
            </div>
        </section>

        <!-- Scene 5.4: Friend's House -->
        <section id="scene-friend-house" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á ‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏™ ‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤... ‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î... ‡πÅ‡∏•‡∏∞‡πÅ‡∏Ç‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡∏≤...</p>
                <button onclick="showScene('scene-user-stroke')" class="choice-btn bg-red-500 text-white font-bold py-3 px-10 rounded-full text-lg">
                    ...
                </button>
            </div>
        </section>

        <!-- Scene 5.5: Go Home Choice -->
        <section id="scene-go-home-choice" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</p>
                <button onclick="showScene('scene-user-stroke')" class="choice-btn bg-stone-200 text-stone-700 font-bold py-3 px-10 rounded-full text-lg">
                    ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö
                </button>
            </div>
        </section>

        <!-- Scene 6: Evening -->
        <section id="scene-evening" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ß‡∏±‡∏ô...</h2>
                <p class="text-lg text-stone-600 mb-8">‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏•‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ó‡∏¥‡πâ‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏á‡∏ö‡∏ô‡πÇ‡∏ã‡∏ü‡∏≤...</p>
                <button onclick="showScene('scene-user-stroke')" class="choice-btn bg-slate-800 text-white font-bold py-3 px-10 rounded-full text-lg">
                    ‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô
                </button>
            </div>
        </section>

        <!-- Scene 7: User's Stroke -->
        <section id="scene-user-stroke" class="scene w-full max-w-2xl text-center hidden">
            <div class="bg-black p-8 rounded-2xl shadow-lg">
                <h2 class="text-4xl font-bold text-white mb-4 animate-pulse">‡∏ó‡∏±‡∏ô‡πÉ‡∏î‡∏ô‡∏±‡πâ‡∏ô...</h2>
                <p class="text-xl text-stone-300" style="filter: blur(1px);">‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á... ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏£‡∏á... ‡∏†‡∏≤‡∏û‡∏ï‡∏£‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏£‡πà‡∏≤‡∏°‡∏±‡∏ß...</p>
            </div>
        </section>

        <!-- Scene 8: The Result -->
        <section id="scene-result" class="scene w-full max-w-3xl text-center hidden">
            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold mb-2">‡∏ì ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•...</h2>
                <p class="text-lg text-stone-600 mb-6">‡∏Ñ‡∏∏‡∏ì‡∏•‡∏∑‡∏°‡∏ï‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢</p>
                <div class="md:flex md:items-center md:gap-8">
                    <div class="md:w-1/2">
                        <h3 class="text-xl font-bold text-teal-700">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢: ‡πÇ‡∏£‡∏Ñ‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á</h3>
                        <p id="result-text" class="text-left my-4 text-stone-700"></p>
                        <div id="warning-symptom-text" class="bg-yellow-100 text-yellow-800 p-4 rounded-lg mb-4"></div>
                        <div id="correct-action-text" class="bg-green-100 text-green-800 p-4 rounded-lg"></div>
                    </div>
                    <div class="md:w-1/2 mt-6 md:mt-0">
                        <div class="chart-container">
                            <canvas id="strokeChart"></canvas>
                        </div>
                         <p class="text-sm text-stone-500 mt-2">‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p>
                    </div>
                </div>
                <button onclick="window.location.reload()" class="choice-btn mt-8 bg-teal-500 text-white font-bold py-3 px-10 rounded-full text-lg">
                    ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </button>
                <div class="mt-8 border-t pt-6 text-sm text-stone-500">
                    <h4 class="font-bold text-base text-stone-700 mb-2">‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢</h4>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-2 mb-6 text-left">
                        <div><span class="font-semibold">Head helper:</span><br>‡∏™‡∏¥‡∏£‡∏µ‡∏ò‡∏±‡∏ç ‡∏™‡∏∏‡∏£‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê (‡πÑ‡∏Å‡πà)</div>
                        <div><span class="font-semibold">Head:</span><br>‡∏ß‡∏¥‡∏£‡∏≤‡∏Å‡∏£ ‡∏ß‡∏á‡∏®‡πå‡∏à‡∏á‡πÉ‡∏à‡∏´‡∏≤‡∏ç (‡∏¢‡∏π‡∏£‡∏¥)</div>
                        <div><span class="font-semibold">Graphic:</span><br>‡∏Å‡∏™‡∏¥‡∏Å‡∏£ ‡∏•‡∏†‡∏±‡∏™‡∏£‡∏î‡∏≤<br>‡∏ä‡∏¢‡∏û‡∏• ‡∏Å‡∏•‡∏±‡∏°‡∏û‡∏™‡∏∏‡∏ï (‡∏≠‡∏≤‡∏°‡∏°‡∏µ‡πà)</div>
                        <div><span class="font-semibold">‡∏Ñ‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤:</span><br>‡∏Å‡∏§‡∏ï‡∏¥‡∏¢‡∏≤ ‡πÉ‡∏à‡∏°‡∏±‡πà‡∏ô (‡∏ß‡∏¥‡∏ß)</div>
                        <div><span class="font-semibold">Openlab dev:</span><br>(‡∏°‡∏¥‡∏™)</div>
                        <div><span class="font-semibold">webpage dev:</span><br>‡∏†‡∏≤‡∏ì‡∏∏‡∏£‡∏∏‡∏à ‡∏™‡∏∏‡∏Ñ‡∏ô‡∏ò‡πå‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå (‡∏õ‡∏±‡πâ‡∏ô)</div>
                    </div>
                    <h4 class="font-bold text-base text-stone-700 mb-2">‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h4>
                    <div class="flex justify-center gap-4">
                        <a href="https://www.sirirajstrokecenter.org/" target="_blank" class="hover:text-teal-600 underline">Siriraj Stroke Center</a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        const gameState = {
            breakfast: null,
            activity: null,
            action: null,
            postIncidentDecision: null,
            continuedActivity: null,
        };

        let currentScene = 'scene-start';

        const minigameData = [
            { q: 'F - Face: ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?', a: ['‡∏õ‡∏≤‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß, ‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ã‡∏µ‡∏Å', '‡∏õ‡∏ß‡∏î‡∏®‡∏µ‡∏£‡∏©‡∏∞‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á'], correctIndex: 0 },
            { q: 'A - Arm: ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÅ‡∏Ç‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?', a: ['‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏£‡∏á‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ã‡∏µ‡∏Å', '‡πÄ‡∏à‡πá‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å'], correctIndex: 0 },
            { q: 'S - Speech: ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?', a: ['‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î, ‡∏û‡∏π‡∏î‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å, ‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏û‡∏π‡∏î', '‡πÑ‡∏≠‡πÄ‡∏£‡∏∑‡πâ‡∏≠‡∏£‡∏±‡∏á'], correctIndex: 0 },
            { q: 'T - Time: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?', a: ['‡∏£‡∏µ‡∏ö‡πÇ‡∏ó‡∏£ 1669 ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î', '‡∏£‡∏≠‡∏î‡∏π‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô'], correctIndex: 0 },
        ];
        let minigameStep = 0;

        function showScene(sceneId) {
            if (sceneId === 'scene-morning-symptom') {
                const textEl = document.getElementById('morning-symptom-text');
                textEl.textContent = gameState.breakfast === 'unhealthy' 
                    ? '‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏°‡∏∂‡∏ô‡∏´‡∏±‡∏ß‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏Ñ‡∏á‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏µ‡∏ö‡∏ó‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ...' 
                    : '‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà!';
            }

            if (sceneId === 'scene-activity-symptom') {
                const textEl = document.getElementById('activity-symptom-text');
                textEl.textContent = gameState.activity === 'stress'
                    ? '‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏≤‡∏û‡∏£‡πà‡∏≤‡πÑ‡∏õ‡πÅ‡∏ß‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á ‡πÅ‡∏ï‡πà‡∏Å‡πá‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏≠‡∏∞‡πÉ‡∏à‡∏≠‡∏∞‡πÑ‡∏£...'
                    : '‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡πÇ‡∏õ‡∏£‡πà‡∏á';
            }

            const currentEl = document.getElementById(currentScene);
            const nextEl = document.getElementById(sceneId);

            if (currentEl) {
                currentEl.classList.add('hidden');
                currentEl.classList.add('opacity-0');
            }
            if (nextEl) {
                nextEl.classList.remove('hidden');
                setTimeout(() => nextEl.classList.remove('opacity-0'), 50);
                currentScene = sceneId;
            }

            if (sceneId === 'scene-user-stroke') {
                setTimeout(() => showScene('scene-result'), 4000);
            }

            if (sceneId === 'scene-result') {
                renderResult();
            }
        }

        function recordChoice(key, value) {
            gameState[key] = value;
        }

        function setupMinigame() {
            const questionEl = document.getElementById('fast-question');
            const answersContainer = document.getElementById('minigame-answers');
            const feedbackEl = document.getElementById('minigame-feedback');

            feedbackEl.textContent = '';

            if (minigameStep >= minigameData.length) {
                showScene('scene-post-incident-choice');
                return;
            }

            const currentQuestion = minigameData[minigameStep];
            questionEl.textContent = currentQuestion.q;

            answersContainer.innerHTML = '';
            currentQuestion.a.forEach((answer, index) => {
                const isCorrect = index === currentQuestion.correctIndex;
                const button = document.createElement('button');
                button.className = 'choice-btn bg-white p-4 rounded-lg border-2 border-stone-200';
                button.textContent = answer;
                button.onclick = () => handleMinigameAnswer(isCorrect);
                answersContainer.appendChild(button);
            });
        }

        function handleMinigameAnswer(isCorrect) {
            const feedbackEl = document.getElementById('minigame-feedback');
            if(isCorrect) {
                feedbackEl.textContent = '‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!';
                feedbackEl.className = 'mt-4 font-semibold text-green-600';
                minigameStep++;
                setTimeout(setupMinigame, 1000);
            } else {
                feedbackEl.textContent = '‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á! ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç';
                feedbackEl.className = 'mt-4 font-semibold text-red-600';
            }
        }

        function renderResult() {
            const resultTextEl = document.getElementById('result-text');
            const warningTextEl = document.getElementById('warning-symptom-text');
            const actionTextEl = document.getElementById('correct-action-text');
            let resultHTML = '‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏≠‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡πÇ‡∏£‡∏Ñ‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á (Stroke) ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏°‡∏≠‡∏á‡∏ï‡∏µ‡∏ö ‡∏ï‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡∏Å ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏≠‡∏á‡∏Ç‡∏≤‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô ';

            if (gameState.breakfast === 'unhealthy') {
                resultHTML += '‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÑ‡∏Ç‡∏°‡∏±‡∏ô‡∏™‡∏π‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥ ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ';
            } else {
                resultHTML += '‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ï‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å ';
            }

            if (gameState.activity === 'stress') {
                resultHTML += '‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ ‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏µ‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏î‡πâ ';
            } else {
                resultHTML += '‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô ';
            }

            resultHTML += '‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤';
            resultTextEl.innerHTML = resultHTML;

            warningTextEl.innerHTML = '<strong>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</strong> ‡∏Ñ‡∏∏‡∏ì‡∏´‡∏°‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏ô‡πâ‡∏≠‡∏¢‡πÜ ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏à‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ß‡∏±‡∏ô ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (TIA) ‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏•‡∏∞‡πÄ‡∏•‡∏¢';

            let actionHTML = '';
            if (gameState.continuedActivity === 'friend') {
                 actionHTML = '<strong>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡∏°‡∏≤‡∏Å!</strong> ‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡∏ö‡∏û‡∏≤‡∏°‡∏≤‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ';
            } else {
                switch (gameState.action) {
                    case 'call':
                        actionHTML = '<strong>‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!</strong> ‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£ 1669 ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ "Time is Brain" ‡∏ó‡∏∏‡∏Å‡∏ô‡∏≤‡∏ó‡∏µ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤';
                        break;
                    case 'panic':
                        actionHTML = '<strong>‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏ï‡∏¥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</strong> ‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏ô‡πà‡∏≤‡∏ï‡∏Å‡πÉ‡∏à ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£ 1669 ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡πÄ‡∏™‡∏°‡∏≠';
                        break;
                    case 'first-aid':
                         actionHTML = '<strong>‡∏Å‡∏≤‡∏£‡∏à‡∏î‡∏à‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏µ‡∏°‡∏≤‡∏Å!</strong> ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£ 1669 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î';
                        break;
                    case 'record':
                        actionHTML = '<strong>‡πÉ‡∏ô‡∏†‡∏≤‡∏ß‡∏∞‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô ‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</strong> ‡∏Å‡∏≤‡∏£‡πÇ‡∏ó‡∏£ 1669 ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏î ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î';
                        break;
                }
            }
            actionTextEl.innerHTML = actionHTML;

            renderChart();
        }

        function renderChart() {
            const ctx = document.getElementById('strokeChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á‡∏ï‡∏µ‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∏‡∏î‡∏ï‡∏±‡∏ô (Ischemic)', '‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏™‡∏°‡∏≠‡∏á‡πÅ‡∏ï‡∏Å (Hemorrhagic)'],
                    datasets: [{
                        label: '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á Stroke',
                        data: [87, 13],
                        backgroundColor: [
                            'rgba(20, 184, 166, 0.7)', // teal
                            'rgba(244, 63, 94, 0.7)'  // rose
                        ],
                        borderColor: [
                            'rgb(15, 118, 110)',
                            'rgb(190, 18, 60)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            showScene('scene-start');
            setupMinigame(); // Initial setup for the minigame scene
        });

    </script>
</body>
</html>